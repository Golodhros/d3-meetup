define(function(require){"use strict";var d3=require("d3");return function(){function buildContainerGroups(){var container=svg.append("g").classed("container-group",!0);container.append("g").classed("chart-group",!0),container.append("g").classed("x-axis-group",!0),container.append("g").classed("y-axis-group",!0)}function buildScales(){xScale=d3.scale.ordinal().domain(data.map(function(d){return d.letter})).rangeRoundBands([0,chartWidth],.1),yScale=d3.scale.linear().domain([0,d3.max(data,getFrequency)]).range([chartHeight,0])}function buildAxis(){xAxis=d3.svg.axis().scale(xScale).orient("bottom"),yAxis=d3.svg.axis().scale(yScale).orient("left").ticks(10,"%")}function drawAxis(){svg.select(".x-axis-group").append("g").attr("class","x axis").attr("transform","translate(0,"+chartHeight+")").call(xAxis),svg.select(".y-axis-group").append("g").attr("class","y axis").call(yAxis).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text("Frequency")}function drawBars(){var bars=svg.select(".chart-group").selectAll(".bar").data(data);bars.enter().append("rect").attr("class","bar").attr("x",function(d){return xScale(d.letter)}).attr("width",xScale.rangeBand()).attr("y",function(d){return yScale(d.frequency)}).attr("height",function(d){return chartHeight-yScale(d.frequency)})}function exports(_selection){_selection.each(function(_data){chartWidth=width-margin.left-margin.right,chartHeight=height-margin.top-margin.bottom,data=_data,buildScales(),buildAxis(),svg||(svg=d3.select(this).append("svg").classed("bar-chart",!0)),svg.attr({width:width+margin.left+margin.right,height:height+margin.top+margin.bottom}),buildContainerGroups(),drawBars(),drawAxis()})}var data,chartWidth,chartHeight,xScale,yScale,xAxis,yAxis,svg,margin={top:20,right:20,bottom:30,left:40},width=960,height=500,getFrequency=function(d){return d.frequency};return exports.margin=function(_x){return arguments.length?(margin=_x,this):margin},exports.width=function(_x){return arguments.length?(width=_x,this):width},exports.height=function(_x){return arguments.length?(height=_x,this):height},exports}});